<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="CSS/EstiloRR.css">
    <title>Registrar Reparaciones</title>
</head>
<body class="Incio" data-role="1">

    <!--header-->
    <div class="header">
        <span class="material-symbols-outlined" onclick="cerrarSesion()">logout</span>
    </div>

    <!--navbar-->
    <div class="Navbar">      
        <div class="titulo">
            <img src="IMG/Logo.png" alt="Logo">
            <p>Sistema GADI</p>
        </div>
        <nav>
            <ul>
                <li><a id="link-inicio" href="Inicio.html">Inicio</a></li>
                <li><a id="link-ventas" href="Registrar_Venta.html">Registrar Venta</a></li>
                <li><a id="link-reparaciones" class="active" href="Registrar_Reparaciones.html">Registrar Reparaciones</a></li>
                <li><a id="link-egresos" href="Registrar_Egresos.html">Registrar Egresos</a></li>
                <li><a id="link-productos" href="Productos.html">Productos</a></li>
                <li><a id="link-ganancias" href="ConfigGanancias.html">Configurar Ganancias</a></li>
                <li><a id="link-reportes" href="Generar_Reporte.html">Generar Reporte</a></li>
                <li><a id="link-transacciones" href="Transacciones.html">Transacciones</a></li>
                <li><a id="link-usuarios" href="Gestionar_Usuario.html">Gestionar Usuario</a></li>
                <li><a id="Link-roles" href="Roles.html">Roles</a></li>
                <li><a onclick="cerrarSesion()" class="cerrar-sesion">Cerrar Sesión</a></li>
            </ul>
        </nav>
    </div>

    <!--main-->
    <div class="main">

        <!--botones y filtro-->
        <div class="acciones-arriba fila-arriba">
            <!--filtro-->
            <div class="acciones-izquierda">
                <input type="text" id="inputFiltrarID" placeholder="ID de reparación">
                <button id="btnFiltrar">Filtrar</button>
            </div>

            <!--botones-->
            <div class="acciones-derecha">
                <button id="btnNuevo">Registrar Reparación</button>
                <button id="btnEliminar">Eliminar Reparación</button>
            </div>
        </div>

        <!--Formulario de registro/modificación-->
        <div id="formReparacion" class="formulario-registro">
            <div class="Info">
                <h1>Registrar / Modificar Reparación</h1>
                <p>Ingrese los datos de la reparación</p>
            </div>

            <div class="RegistroV">
                <div class="columna-izq">
                    <div class="form">
                        <label>Nombre del Cliente</label>
                        <input type="text" id="nombrecliente" class="registro" required>
                    </div>

                    <div class="form">
                        <label>Teléfono del Cliente</label>
                        <input type="text" id="telcliente" class="registro" required>
                    </div>

                    <div class="form">
                        <label>Marca del Equipo</label>
                        <input type="text" id="marcaequipo" class="registro" required>
                    </div>

                    <div class="form">
                        <label>Costo Revisión ($)</label>
                        <input type="number" id="costorevision" class="registro" step="0.01" value="0">
                    </div>

                    <div class="form">
                        <label>Costo Reparación ($)</label>
                        <input type="number" id="costoreparacion" class="registro" step="0.01" value="0">
                    </div>
                </div>

                <div class="columna-der">
                    <div class="form">
                        <label>Fecha Diagnóstico</label>
                        <input type="date" id="fechadiagnostico" class="registro" required>
                    </div>

                    <div class="form">
                        <div class="titulo-fecha">
                            <label>Fecha Aprobación</label>
                            <input type="checkbox" id="chk_aprobacion" class="chk-fecha">
                        </div>
                        <input type="date" id="fechaaprobacion" class="registro">
                    </div>

                    <div class="form">
                        <div class="titulo-fecha">
                            <label>Fecha Entrega</label>
                            <input type="checkbox" id="chk_entrega" class="chk-fecha">
                        </div>
                        <input type="date" id="fechaentrega" class="registro">
                    </div>

                    <div class="form">
                        <label>Estado de Reparación</label>
                        <select class="Selector" id="estadoreparacion" required>
                            <option value="">Seleccione el estado</option>
                            <option value="Pendiente">Pendiente</option>
                            <option value="En Diagnóstico">En Diagnóstico</option>
                            <option value="Reparado">Reparado</option>
                            <option value="Entregado">Entregado</option>
                        </select>
                    </div>

                    <input type="hidden" id="iduser">
                </div>
            </div>

            <!--Botones del formulario-->
            <div class="botones">
                <button type="button" class="btnRegistrar" id="btnGuardarReparacion">Guardar</button>
                <button type="button" class="btnCancelar">Cancelar</button>
            </div>
        </div>

        <!--Tabla de reparaciones-->
        <div class="tabla-reparaciones">
            <table id="tblReparaciones">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Cliente</th>
                        <th>Teléfono</th>
                        <th>Marca</th>
                        <th>Diagnóstico</th>
                        <th>Aprobación</th>
                        <th>Entrega</th>
                        <th>Estado</th>
                        <th>Costo Revisión</th>
                        <th>Costo Reparación</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const usuario = JSON.parse(localStorage.getItem("ej_user"));
            if (usuario) document.getElementById("iduser").value = usuario.iduser;
        });
    </script>
    <script src="JS/Sesion.js"></script>
    <script src="JS/RegistrarReparacion.js"></script>
</body>
</html>
